<?php

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
//revisar que se sube una foto 
    if (isset($_FILES['foto']) && $_FILES['foto']['error'] === 0) {

       // carpeta donde se guardaran las fotos enviadas
        $carpetaDestino = 'uploads/';

       // creamos la carpeta si no existe para el guardado de las fotos 
        if (!file_exists($carpetaDestino)) {
            mkdir($carpetaDestino, 0777, true);
        }

      // nombre del archivo que sube el usuario 
        $nombreArchivo = basename($_FILES['foto']['name']);

        //ruta de guardado del archivo subido
        $rutaDestino = $carpetaDestino . $nombreArchivo;

        // mover la imagen a la carpeta para que no se borre  del servidor temproal 
        if (move_uploaded_file($_FILES['foto']['tmp_name'], $rutaDestino)) {
            echo "Imagen subida correctamente.";
        } else {
            echo "Error al subir la imagen.";
        }

    } else {
        echo "No se ha enviado ninguna imagen o ocurrió un error.";
    }
}
?>

<section id="perfil" class="container">
    <div class="perfil-header">
        <h2>Mi Perfil</h2>
        <p>Sube tus fotos aquí.</p>
    </div>

    <form action="" method="POST" enctype="multipart/form-data">
        <label>Subir una foto:</label>
        <input type="file" name="foto" required>
        <button type="submit">Subir</button>
    </form>
</section>
